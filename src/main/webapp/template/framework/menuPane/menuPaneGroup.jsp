<%-- * File           : $Header: //depot/escenic/widget-framework/branches/3.2/widget-framework-core-module/widget-framework-core/src/main/webapp/template/framework/menuPane/menuPaneGroup.jsp#2 $ * Last edited by : $Author: dbs $ $Date: 2014/06/30 $ * Version        : $Revision: #2 $ * * Copyright (C) 2009 Escenic AS. * All Rights Reserved.  No use, copying or distribution of this * work may be made except in accordance with a valid license * agreement from Escenic AS.  This notice must be included on * all copies, modifications and derivatives of this work.--%><%@ page session="false" %><%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %><%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %><%@ taglib prefix="section" uri="http://www.escenic.com/taglib/escenic-section" %><%@ taglib prefix="article" uri="http://www.escenic.com/taglib/escenic-article" %><%@ taglib prefix="wf-core" uri="http://www.escenic.com/widget-framework/core" %><%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %><%@ taglib prefix="view" uri="http://www.escenic.com/taglib/escenic-view" %><%@ taglib prefix="menu" uri="http://www.escenic.com/taglib/escenic-menu" %><c:set var="paneGroup" value="${requestScope.menuPaneGroup}"/><c:set var="styleId" value="${fn:trim(paneGroup.options.styleId)}"/><c:set var="customStyleClass" value="${fn:trim(paneGroup.options.customStyleClass)}"/><c:set var="allClasses"><c:if test="${not empty customStyleClass}">${customStyleClass}</c:if></c:set><c:if test="${not empty paneGroup}">  <c:set var="reference" value="${fn:trim(paneGroup.options.reference)}"/>  <c:set var="linkText" value="${fn:trim(paneGroup.options.linkText)}"/>  <c:choose>    <c:when test="${reference eq 'sectionUniqueName'}">      <c:set var="sectionUniqueName" value="${fn:trim(paneGroup.options.sectionUniqueName)}"/>      <section:use uniqueName="${sectionUniqueName}">        <c:set var="linkUrl" value="${section.url}"/>        <c:if test="${empty linkText}">          <c:set var="linkText" value="${sectionUniqueName}"/>        </c:if>      </section:use>    </c:when>    <c:when test="${reference eq 'url'}">      <c:set var="linkUrl" value="${fn:trim(paneGroup.options.url)}"/>    </c:when>    <c:when test="${reference eq 'articleId'}">      <fmt:formatNumber var="articleId" value="${paneGroup.options.articleId}" maxFractionDigits="0" type="number"                        pattern="###"/>      <article:use articleId="${articleId}">        <c:set var="linkUrl" value="${article.url}"/>      </article:use>    </c:when>    <c:when test="${reference eq 'menu'}">      <c:if test="${not empty paneGroup.options.menuName}">        <menu:use id="menuTree" treeName="${paneGroup.options.menuName}">          <view:iterate id="menuItem" name="menuTree" depth="2">            <c:set var="uniqueId" value="menuPane-link-${requestScope.menuPaneGroupId}"/>            <c:choose>              <c:when test="${menuItem.type == 1}">                <section:use sectionId="${menuItem.sectionId}">                  <jsp:include page="helper/paneContent.jsp">                    <jsp:param name="styleId" value="${styleId}"/>                    <jsp:param name="allClasses" value="${allClasses}"/>                    <jsp:param name="linkText" value="${menuItem.text}"/>                    <jsp:param name="linkUrl" value="${menuItem.URL}"/>                    <jsp:param name="linkId" value="${uniqueId}-${section.id}"/>                  </jsp:include>                </section:use>              </c:when>              <c:otherwise>                <li <c:if test="${not empty allClasses}">class="${allClasses}"</c:if>                    <c:if test="${not empty styleId}">id="${styleId}"</c:if>>                  <a href="${menuItem.URL}" id="${uniqueId}-${menuItem.text}">                    <c:out value="${menuItem.text}" escapeXml="true"/>                  </a>                </li>              </c:otherwise>            </c:choose>          </view:iterate>        </menu:use>      </c:if>    </c:when>  </c:choose>  <c:if test="${not empty linkText and not empty linkUrl}">    <c:set var="uniqueId" value="${requestScope.menuPaneGroupId}"/>    <jsp:include page="helper/paneContent.jsp">      <jsp:param name="styleId" value="${styleId}"/>      <jsp:param name="allClasses" value="${allClasses}"/>      <jsp:param name="linkText" value="${linkText}"/>      <jsp:param name="linkUrl" value="${linkUrl}"/>      <jsp:param name="linkId" value="menuPane-link-${uniqueId}"/>    </jsp:include>  </c:if></c:if>